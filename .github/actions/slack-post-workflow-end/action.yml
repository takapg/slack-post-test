name: Slack post workflow end

runs:
  using: "composite"
  steps:
    - name: Set success environment variables
      if: success()
      run: |
        echo 'RESULT_MESSAGE=成功しました' >> $GITHUB_ENV
        echo 'COLOR_CODE=green' >> $GITHUB_ENV
      shell: bash

    - name: Set failure environment variables
      if: failure()
      run: |
        echo 'RESULT_MESSAGE=失敗しました' >> $GITHUB_ENV
        echo 'COLOR_CODE=red' >> $GITHUB_ENV
      shell: bash

    - name: Slack post
      uses: ./.github/actions/slack-post
      with:
        text: '[${{ github.event.inputs.env }}] ${{ github.workflow }} が${{ env.RESULT_MESSAGE }}'
        color-code: '${{ env.COLOR_CODE }}'
